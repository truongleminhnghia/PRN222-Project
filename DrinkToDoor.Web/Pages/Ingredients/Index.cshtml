@page
@model DrinkToDoor.Web.Pages.Ingredients.Index
@{
    ViewData["Title"] = "Danh sách nguyên liệu";
}

@section Styles {
    <style>
        .ingredient-card {
            transition: transform .2s, box-shadow .2s;
            cursor: pointer;
        }

        .ingredient-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, .15);
        }

        .card-thumb {
            object-fit: cover;
            width: 100%;
            height: 180px;
        }

        .clamp-2 {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
        }

        .clamp-1 {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
        }
    </style>
}

<div class="container-xxl mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-transparent px-0">
            <li class="breadcrumb-item"><a href="/Index">Trang chủ</a></li>
            <li class="breadcrumb-item active" aria-current="page">Nguyên liệu</li>
        </ol>
    </nav>

    <div class="row gy-4">
        @foreach (var item in Model.Ingredients)
        {
            <div class="col-6 col-md-4 col-lg-3">
                <div class="card shadow-sm bg-white ingredient-card" style="width: 18rem;"
                    onclick="location.href='@Url.Page("/Ingredients/Detail", new { id = item.Id })'">

                    <img src="@(item.Images?.FirstOrDefault()?.Url ?? Url.Content("~/images/placeholder.png"))"
                        class="card-img-top card-thumb" alt="@item.Name" />

                    <div class="card-body">
                        <h5 class="card-title clamp-1" style="font-size: 18px; font-weight: 500; color: black;">@item.Name
                        </h5>
                        <p class="card-text" style="font-size: 16px; font-weight: 400; color: #6c757d;">
                            @item.Price.ToString("C0")</p>
                        <p class="card-text clamp-2">@item.Description</p>
                        <div class="d-flex gap-2">
                            <a class="btn btn-primary  flex-fill">Thêm giỏ hàng</a>
                            <a asp-page="Detail" asp-route-id="@item.Id" class="btn btn-outline-primary flex-fill">Xem chi
                                tiết</a>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="card-footer bg-white">
        <nav aria-label="Trang" class="d-flex justify-content-center">
            <ul class="pagination pagination-sm mb-0">
                <li class="page-item @(Model.PageCurrent == 1 ? "disabled" : "")">
                    <a class="page-link" asp-route-PageCurrent="@(Model.PageCurrent - 1)"
                        asp-route-PageSize="@Model.PageSize">&lsaquo;</a>
                </li>
                @for (int i = 1; i <= Model.TotalPages; i++)
                {
                    <li class="page-item @(i == Model.PageCurrent ? "active" : "")">
                        <a class="page-link" asp-route-PageCurrent="@i" asp-route-PageSize="@Model.PageSize">@i</a>
                    </li>
                }
                <li class="page-item @(Model.PageCurrent == Model.TotalPages ? "disabled" : "")">
                    <a class="page-link" asp-route-PageCurrent="@(Model.PageCurrent + 1)"
                        asp-route-PageSize="@Model.PageSize">&rsaquo;</a>
                </li>
            </ul>
        </nav>
    </div>
</div>
